Check if any given move would result in check, then remove it.
Rockade
En passant (optional)
Pawn goes to the other side of the board can get his queen back
Check mate
UI stuff
change bullet to red tile colour when attacking a piece
check symbol 
sound effects
end game 

fixing:
pull population of pawn diagonal attack into the population of the pawn moves 
king moving into moves which will result in check